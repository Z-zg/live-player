# ğŸ§ª æ¸¸æˆç›´æ’­ç³»ç»Ÿæµ‹è¯•æŒ‡å—

## ğŸ“‹ æµ‹è¯•å‰å‡†å¤‡

### 1. ç¼–è¯‘é¡¹ç›®
```bash
# ç¡®ä¿é¡¹ç›®å·²ç¼–è¯‘
cargo build --release

# æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶
ls -la target/release/game-stream-*
```

### 2. æ£€æŸ¥ä¾èµ–
```bash
# æ£€æŸ¥ FFmpeg (å¯é€‰ï¼Œç”¨äºæ¨æµæµ‹è¯•)
ffmpeg -version

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080
lsof -i :1935
```

## ğŸš€ å¿«é€Ÿæµ‹è¯•æ–¹æ³•

### æ–¹æ³•1: ä¸€é”®æµ‹è¯•è„šæœ¬
```bash
# æœ€ç®€å•çš„æµ‹è¯•æ–¹å¼
./scripts/quick-test.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- è‡ªåŠ¨å¯åŠ¨æœåŠ¡å™¨
- æ˜¾ç¤ºæµ‹è¯•æŒ‡å¯¼
- æä¾›æ¨æµå’Œè§‚çœ‹çš„å…·ä½“å‘½ä»¤

### æ–¹æ³•2: å®Œæ•´æµ‹è¯•è„šæœ¬
```bash
# åŒ…å«å®¢æˆ·ç«¯çš„å®Œæ•´æµ‹è¯•
./scripts/test-live-streaming.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- å¯åŠ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
- è‡ªåŠ¨è¿›è¡Œ FFmpeg æ¨æµæµ‹è¯•
- æä¾›è¯¦ç»†çš„æµ‹è¯•æŒ‡å¯¼

### æ–¹æ³•3: FFmpeg æ¨æµä¸“é¡¹æµ‹è¯•
```bash
# ä¸“é—¨æµ‹è¯• FFmpeg æ¨æµ
./scripts/test-ffmpeg-push.sh
```

## ğŸ”§ æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1: å¯åŠ¨æœåŠ¡å™¨
```bash
# åœ¨ç»ˆç«¯1ä¸­å¯åŠ¨æœåŠ¡å™¨
./target/release/game-stream-server -v

# ç­‰å¾…çœ‹åˆ°ç±»ä¼¼è¾“å‡º:
# [INFO] RTMP server listening on 0.0.0.0:1935
# [INFO] HTTP server listening on 0.0.0.0:8080
```

### æ­¥éª¤2: éªŒè¯æœåŠ¡å™¨
```bash
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­æµ‹è¯• API
curl http://localhost:8080/api/streams

# åº”è¯¥è¿”å›: {"streams":[]}
```

### æ­¥éª¤3: æ¨æµæµ‹è¯•

#### é€‰é¡¹A: ä½¿ç”¨å†…ç½®å®¢æˆ·ç«¯
```bash
# åœ¨ç»ˆç«¯2ä¸­å¯åŠ¨å®¢æˆ·ç«¯
./target/release/game-stream-client -v
```

#### é€‰é¡¹B: ä½¿ç”¨ FFmpeg æ¨æµ
```bash
# æ¨æµæµ‹è¯•è§†é¢‘ (30ç§’)
ffmpeg -f lavfi -i testsrc=duration=30:size=1280x720:rate=30 \
       -f lavfi -i sine=frequency=1000:duration=30 \
       -c:v libx264 -preset ultrafast -tune zerolatency \
       -c:a aac -b:a 128k \
       -f flv rtmp://localhost:1935/live/test_stream_123
```

#### é€‰é¡¹C: å±å¹•å½•åˆ¶æ¨æµ (macOS)
```bash
# æ¨æµå±å¹•å†…å®¹
ffmpeg -f avfoundation -i "1:0" \
       -c:v libx264 -preset ultrafast \
       -c:a aac -f flv \
       rtmp://localhost:1935/live/test_stream_123
```

### æ­¥éª¤4: è§‚çœ‹æµ‹è¯•

#### ç½‘é¡µè§‚çœ‹ç«¯
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:8080
2. è¾“å…¥æµå¯†é’¥: `test_stream_123`
3. é€‰æ‹©æ’­æ”¾åè®®:
   - **WebRTC**: è¶…ä½å»¶è¿Ÿ (< 100ms)
   - **HLS**: å…¼å®¹æ€§å¥½ (6-30s å»¶è¿Ÿ)
4. ç‚¹å‡»"è¿æ¥"æŒ‰é’®

#### æµ‹è¯•é¡µé¢ (è°ƒè¯•ç”¨)
1. è®¿é—®: http://localhost:8080/test.html
2. æŸ¥çœ‹è¯¦ç»†çš„è¿æ¥æ—¥å¿—
3. æµ‹è¯• WebRTC ä¿¡ä»¤äº¤äº’

#### ç›´æ¥æ’­æ”¾ HLS
```bash
# ä½¿ç”¨ ffplay æ’­æ”¾ HLS
ffplay http://localhost:8080/hls/test_stream_123/playlist.m3u8

# ä½¿ç”¨ VLC æ’­æ”¾
vlc http://localhost:8080/hls/test_stream_123/playlist.m3u8
```

## ğŸ“Š æµ‹è¯•éªŒè¯ç‚¹

### 1. æœåŠ¡å™¨åŠŸèƒ½
- [ ] RTMP æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨ (ç«¯å£ 1935)
- [ ] HTTP æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨ (ç«¯å£ 8080)
- [ ] WebSocket ä¿¡ä»¤æœåŠ¡æ­£å¸¸
- [ ] API æ¥å£å“åº”æ­£å¸¸

### 2. æ¨æµåŠŸèƒ½
- [ ] RTMP æ¨æµè¿æ¥æˆåŠŸ
- [ ] æµçŠ¶æ€æ­£ç¡®æ›´æ–°
- [ ] åª’ä½“æ•°æ®æ­£å¸¸æ¥æ”¶

### 3. è§‚çœ‹åŠŸèƒ½
- [ ] ç½‘é¡µç•Œé¢æ­£å¸¸åŠ è½½
- [ ] WebRTC è¿æ¥å»ºç«‹æˆåŠŸ
- [ ] HLS æ’­æ”¾åˆ—è¡¨ç”Ÿæˆ
- [ ] è§†é¢‘æ’­æ”¾æ­£å¸¸

### 4. å®æ—¶æ€§æµ‹è¯•
- [ ] WebRTC å»¶è¿Ÿ < 500ms
- [ ] HLS å»¶è¿Ÿ < 30s
- [ ] è¿æ¥çŠ¶æ€å®æ—¶æ›´æ–°

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æœåŠ¡å™¨å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080
lsof -i :1935

# æ€æ­»å ç”¨è¿›ç¨‹
sudo kill -9 <PID>
```

### é—®é¢˜2: æ¨æµè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ RTMP æœåŠ¡å™¨çŠ¶æ€
curl http://localhost:8080/api/streams

# æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
./target/release/game-stream-server -v
```

### é—®é¢˜3: WebRTC è¿æ¥å¤±è´¥
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ (F12)
2. ç¡®è®¤ WebSocket è¿æ¥æ­£å¸¸
3. æ£€æŸ¥ STUN æœåŠ¡å™¨è¿é€šæ€§

### é—®é¢˜4: HLS æ’­æ”¾å¤±è´¥
```bash
# æ£€æŸ¥ HLS æ–‡ä»¶ç”Ÿæˆ
curl http://localhost:8080/hls/test_stream_123/playlist.m3u8

# åº”è¯¥è¿”å› M3U8 æ’­æ”¾åˆ—è¡¨
```

### é—®é¢˜5: FFmpeg æ¨æµå¤±è´¥
```bash
# æ£€æŸ¥ FFmpeg ç‰ˆæœ¬
ffmpeg -version

# ä½¿ç”¨æ›´ç®€å•çš„æ¨æµå‘½ä»¤
ffmpeg -re -f lavfi -i testsrc -c:v libx264 -f flv rtmp://localhost:1935/live/test
```

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### å»¶è¿Ÿæµ‹è¯•
```bash
# ä½¿ç”¨æ—¶é—´æˆ³æµ‹è¯•å»¶è¿Ÿ
ffmpeg -f lavfi -i "testsrc=size=1280x720:rate=30,drawtext=text='%{localtime}':x=10:y=10:fontsize=48:fontcolor=white" \
       -c:v libx264 -preset ultrafast \
       -f flv rtmp://localhost:1935/live/test_stream_123
```

### å¹¶å‘æµ‹è¯•
```bash
# å¯åŠ¨å¤šä¸ªæ¨æµ (æµ‹è¯•æœåŠ¡å™¨è´Ÿè½½)
for i in {1..5}; do
    ffmpeg -f lavfi -i testsrc -c:v libx264 -f flv rtmp://localhost:1935/live/stream_$i &
done
```

### å¸¦å®½æµ‹è¯•
```bash
# é«˜ç ç‡æ¨æµæµ‹è¯•
ffmpeg -f lavfi -i testsrc=size=1920x1080:rate=60 \
       -c:v libx264 -b:v 5000k -preset ultrafast \
       -f flv rtmp://localhost:1935/live/test_hd
```

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

### åŸºç¡€åŠŸèƒ½æµ‹è¯•
- æœåŠ¡å™¨å¯åŠ¨: âœ…/âŒ
- RTMP æ¨æµ: âœ…/âŒ
- WebRTC è§‚çœ‹: âœ…/âŒ
- HLS è§‚çœ‹: âœ…/âŒ
- API æ¥å£: âœ…/âŒ

### æ€§èƒ½æµ‹è¯•
- WebRTC å»¶è¿Ÿ: ___ms
- HLS å»¶è¿Ÿ: ___s
- æœ€å¤§å¹¶å‘æµ: ___ä¸ª
- CPU ä½¿ç”¨ç‡: ___%
- å†…å­˜ä½¿ç”¨: ___MB

### å…¼å®¹æ€§æµ‹è¯•
- Chrome: âœ…/âŒ
- Firefox: âœ…/âŒ
- Safari: âœ…/âŒ
- Edge: âœ…/âŒ
- ç§»åŠ¨ç«¯: âœ…/âŒ

## ğŸ¯ æµ‹è¯•å»ºè®®

1. **ä»ç®€å•åˆ°å¤æ‚**: å…ˆæµ‹è¯•åŸºç¡€åŠŸèƒ½ï¼Œå†æµ‹è¯•é«˜çº§ç‰¹æ€§
2. **å¤šæµè§ˆå™¨æµ‹è¯•**: WebRTC åœ¨ä¸åŒæµè§ˆå™¨ä¸­è¡¨ç°å¯èƒ½ä¸åŒ
3. **ç½‘ç»œç¯å¢ƒæµ‹è¯•**: åœ¨ä¸åŒç½‘ç»œæ¡ä»¶ä¸‹æµ‹è¯•å»¶è¿Ÿå’Œç¨³å®šæ€§
4. **é•¿æ—¶é—´æµ‹è¯•**: æµ‹è¯•ç³»ç»Ÿé•¿æ—¶é—´è¿è¡Œçš„ç¨³å®šæ€§
5. **é”™è¯¯æ¢å¤æµ‹è¯•**: æµ‹è¯•ç½‘ç»œæ–­å¼€é‡è¿ç­‰å¼‚å¸¸æƒ…å†µ

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœæµ‹è¯•è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜:
1. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—è¾“å‡º
2. æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·
3. å‚è€ƒ README.md å’Œ FFMPEG_SETUP.md
4. ä½¿ç”¨æµ‹è¯•é¡µé¢ (test.html) è¿›è¡Œè°ƒè¯•
